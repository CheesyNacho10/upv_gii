>>> import numpy as np
>>> X=np.array([[2,-2,1,-2,2,-1],[-2,2,-1,2,-2,1],[-2,-1,2,2,1,-2]])
>>> X
array([[ 2, -2,  1, -2,  2, -1],
       [-2,  2, -1,  2, -2,  1],
       [-2, -1,  2,  2,  1, -2]])
>>> X=np.transpose(X)
>>> X
array([[ 2, -2, -2],
       [-2,  2, -1],
       [ 1, -1,  2],
       [-2,  2,  2],
       [ 2, -2,  1],
       [-1,  1, -2]])
>>> media=np.mean(X,axis=0)
>>> media
array([0., 0., 0.])
>>> media=np.sum(X,axis=0)/X.shape[1]
>>> media
array([0., 0., 0.])
>>> Xm=X-media
>>> Xm
array([[ 2., -2., -2.],
       [-2.,  2., -1.],
       [ 1., -1.,  2.],
       [-2.,  2.,  2.],
       [ 2., -2.,  1.],
       [-1.,  1., -2.]])
>>> Sigma=np.transpose(Xm)@Xm/Xm.shape[0];
>>> Sigma
array([[ 3., -3.,  0.],
       [-3.,  3.,  0.],
       [ 0.,  0.,  3.]])
>>> Sigma=np.cov(X,rowvar=False,bias=True)
>>> Sigma
array([[ 3., -3.,  0.],
       [-3.,  3.,  0.],
       [ 0.,  0.,  3.]])
>>> eigval,eigvec = np.linalg.eig(Sigma)
>>> eigval
array([ 6.0000000e+00, -8.8817842e-16,  3.0000000e+00])
>>> eigvec
array([[ 0.70710678,  0.70710678,  0.        ],
       [-0.70710678,  0.70710678,  0.        ],
       [ 0.        ,  0.        ,  1.        ]])
>>> sort_index=np.argsort(eigval)
>>> sort_index
array([1, 2, 0])
>>> sort_index= sort_index[::-1]
>>> sort_index
array([0, 2, 1])
>>> eigval[sort_index]
array([ 6.0000000e+00,  3.0000000e+00, -8.8817842e-16])
>>> eigvec=eigvec[:,sort_index]
>>> eigvec
array([[ 0.70710678,  0.        ,  0.70710678],
       [-0.70710678,  0.        ,  0.70710678],
       [ 0.        ,  1.        ,  0.        ]])
>>> W=eigvec[:,:2]
>>> W
array([[ 0.70710678,  0.        ],
       [-0.70710678,  0.        ],
       [ 0.        ,  1.        ]])
>>> Xm
array([[ 2., -2., -2.],
       [-2.,  2., -1.],
       [ 1., -1.,  2.],
       [-2.,  2.,  2.],
       [ 2., -2.,  1.],
       [-1.,  1., -2.]])
>>> Xp=Xm@W
>>> Xp
array([[ 2.82842712, -2.        ],
       [-2.82842712, -1.        ],
       [ 1.41421356,  2.        ],
       [-2.82842712,  2.        ],
       [ 2.82842712,  1.        ],
       [-1.41421356, -2.        ]])
